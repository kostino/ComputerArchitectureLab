# Εργασία Πρώτου Εργαστηρίου Αρχιτεκτονικής Υπολογιστών ΤΗΜΜΥ 2019

**Βλάχος Άγγελος** ΑΕΜ : 9087  
**Τριαρίδης Κωνσταντίνος** ΑΕΜ : 9159

### Περιεχόμενα
1. Καταγραφή βασικών χαρακτηριστικών συστήματος στο starter_se
2. Επαλήθευση ερ.1 από αρχεία config.ini, config.json
3. Διαφορετικά μοντέλα in-order cpu στον gem-5 και benchmarks σε δικό μας πρόγραμμα

  * Εκτέλεση προγράμματος σε TimingSimpleCPU , MinorCPU και σύγκριση αποτελεσμάτων
  * Ερμηνεία των αποτελεσμάτων , βάσει των διαφορών των μοντέλων
  * Αλλαγή παραμέτρων CPU, memory στο ίδιο μοντέλο και σύγκριση αποτελεσμάτων


### Καταγραφή βασικών χαρακτηριστικών συστήματος στο starter_se
Στην αρχή του αρχείου _starter_se.py_ δηλώνονται τα διαφορετικά μοντέλα cpu που μπορούμε να χρησιμοποιήσουμε. Εμείς επιλέξαμε (με την επιλογή --cpu="minor ") να έχουμε **τύπο cpu** MinorCPU. Εφόσον δεν χρησιμοποιήσαμε άλλες επιλογές τα άλλα βασικά χαρακτηριστικά έχουν τις default τιμές τους , δηλαδή **συχνοτητα λειτουργίας** : 4GHz , **αριθμό πυρήνων** : 1 , **είδος κύριας μνήμης** : DDR3 με συχνότητα λειτουργίας 1600MHz, 2 κανάλια και **μεγεθος κύριας μνήμης** 2GB. Υπάρχουν και άλλα βασικά χαρακτηριστικά που δεν μπορούμε να αλλάξουμε με επιλογές κατα την εκτέλεση του προγράμματος όπως το **μέγεθος γραμμής cache** : 64 bytes . Οι caches εξαρτώνται από τον τύπο cpu που δίνουμε ως παράμετρο οπότε αφου χρησιμοποιούμε minorCPU έχουμε L1 και L2 cache σύμφωνα με την δήλωση των τύπων CPU στην αρχή του αρχείου.

### Επαλήθευση ερ.1 από αρχεία config.ini, config.json
Οι πληροφορίες στα αρχεία επιβεβαιώνουν τις παρατηρήσεις του προηγούμενου ερωτήματος αφού βλέπουμε πως όντως έχουμε τύπο CPU minorCPU,
```python
type=MinorCPU
```

με συχνότητα λειτουργίας 4GHz(το clock μετράει χρόνο σε ns),
```python
clock=250
```
ενώ η κύρια μνήμη έχει μέγεθος 2GB( 2^31 θέσεις ) και δύο κανάλια
```python
mem_ranges=0:2147483647
memories=system.mem_ctrls0 system.mem_ctrls1
```
και οι caches μέγεθος γραμμής 64 bytes
```python
cache_line_size=64
```
### Διαφορετικά μοντέλα in-order cpu στον gem-5 και benchmarks σε δικό μας πρόγραμμα
Στον gem5 υπάρχουν τρία μοντέλα in-order CPUs : το MinorCPU και τα δύο μοντέλα με βάση το SimpleCPU , το TimingSimpleCPU και το AtomicSimpleCPU.
#### SimpleCPU
Το SimpleCPU αποτελεί ένα πολύ απλό στην υλοποίηση  in order μοντέλο κατασκευασμένο για χρήση σε απλά τεστ , όπου δεν είναι απαραίτητη η χρήση κάποιου πιο περίπλοκου μοντέλου.
##### AtomicSimpleCPU
Το AtomicSimpleCPU αποτελεί υλοποίηση του SimpleCPU μοντέλου που χρησιμοποιεί πρόσβαση στη μνήμη τύπου atomic(_atomic memory access_). Αυτό σημαίνει ότι υπολογίζει προσεγγιστικά τον χρόνο πρόσβασης στην cache από τις χρονικές προσεγγίσεις των atomic accesses οι οποίες επιστρέφουν μια προσέγγιση του χρόνου που θα χρειαστούν για το access , ενώ η επιστροφή τιμής γίνεται στο τέλος του access function. Με αυτό τον τρόπο αποφεύγεται το queuing delay και το resource contention διότι η cpu γνωρίζει προσεγγιστικά τον χρόνο πρόσβασης στην μνήμη πριν αυτή ολοκληρωθεί.
##### TimingSimpleCPU
Το TimingSimpleCPU αποτελεί υλοποίηση του SimpleCPU μοντέλου που χρησιμοποιεί πρόσβαση στη μνήμη τύπου timing(_timing memory access_). Αυτό σημαίνει ότι σε κάθε πρόσβαση στην cache καθυστερεί και περιμένει την απάντηση από το σύστημα μνήμης (είτε NACK εάν δεν μπορούσε να ολοκληρωθεί το αίτημα είτε την τιμή στην μνήμη που ζητήθηκε) πριν συνεχίσει την εκτέλεση εντολών ,υπάρχει δηλαδή resource contention και queuing delay , αφού ο επεξεργαστής περιμένει την ολοκλήρωση της πρόσβασης στην μνήμη για να συνεχίσει.
#### MinorCPU
Το MinorCPU μοντέλο αποτελεί ένα in-order μοντέλο με συγκεκριμένο pipeline(Fetch1-Fetch2-Decode-Execute) αλλά προσαρμοζόμενα data structures και προσαρμοζόμενη συμπεριφορά εκτέλεσης. Το σταθερό pipeline του βοηθάει στην αναγνώριση και οπτικοποίηση μέσα σε αυτό της κάθε εντολής από μία προσομοίωση. 
